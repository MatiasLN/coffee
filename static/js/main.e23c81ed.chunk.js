(this.webpackJsonpcoffee=this.webpackJsonpcoffee||[]).push([[0],{14:function(e,t,a){e.exports=a.p+"static/media/placeholder.505dce53.jpeg"},15:function(e,t,a){e.exports=a(28)},20:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(13),r=a.n(l),i=(a(20),a(1)),o=a(5),s=a.n(o),u=a(7),m=a(3);a(29),a(22),a(26);m.initializeApp({apiKey:"AIzaSyD26XUmLKds2rS-ONbGjbXC80kHpa0mAxk",authDomain:"covfefe-4e9ea.firebaseapp.com",databaseURL:"https://covfefe-4e9ea.firebaseio.com",projectId:"covfefe-4e9ea",storageBucket:"covfefe-4e9ea.appspot.com",messagingSenderId:"1015333247439",appId:"1:1015333247439:web:903c647f24fac151355aba"});var d=m.storage(),f=m.firestore(),g=m.firestore.FieldValue.serverTimestamp,p=(new m.auth.GoogleAuthProvider,new m.auth.GoogleAuthProvider),E=m.auth(),v=function(){E.signInWithPopup(p).then((function(e){console.log(e.user)})).catch((function(e){console.log(e.message)}))},h=Object(n.createContext)(),b=function(e){var t=e.children,a=Object(n.useState)(""),l=Object(i.a)(a,2),r=l[0],o=l[1];return Object(n.useEffect)((function(){E.onAuthStateChanged(function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n,c,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.displayName,n=t.email,c=t.photoURL,l=t.uid,o({displayName:a,email:n,photoURL:c,uid:l});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),c.a.createElement(h.Provider,{value:{user:r}},t)},y=a(10),j=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){var t=f.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(y.a)(Object(y.a)({},e.data()),{},{id:e.id}))})),l(t)}));return function(){return t()}}),[e]),{docs:c}},S=function(e){var t=e.isSelected,a=e.setRating;e.click;return c.a.createElement("li",{className:t?"selected":null,onClick:a},c.a.createElement("svg",{x:"0px",y:"0px",viewBox:"0 0 16 15",className:"star"},c.a.createElement("path",{d:"M8.5,0.3l2,4.1c0.1,0.2,0.2,0.3,0.4,0.3l4.6,0.7c0.4,0.1,0.6,0.6,0.3,0.9l-3.3,3.2c-0.1,0.1-0.2,0.3-0.2,0.5l0.8,4.5 c0.1,0.4-0.4,0.8-0.8,0.6l-4.1-2.1c-0.2-0.1-0.3-0.1-0.5,0l-4.1,2.1c-0.4,0.2-0.9-0.1-0.8-0.6l0.8-4.5c0-0.2,0-0.4-0.2-0.5L0.2,6.2 C-0.2,5.9,0,5.4,0.5,5.3L5,4.7c0.2,0,0.3-0.1,0.4-0.3l2-4.1C7.7-0.1,8.3-0.1,8.5,0.3z"})))};var O=function(e){var t=e.rating,a=e.setRating;return c.a.createElement("ul",{className:"stars"},function(){for(var e=[],n=function(n){e.push(c.a.createElement(S,{isSelected:t>n,setRating:function(){return a(n+1)},key:n}))},l=0;l<5;l++)n(l);return e}())},k=a(14),N=a.n(k),C=function(e){var t=e.data;return["localhost","127.0.0.1"].includes(window.location.hostname)?c.a.createElement("img",{src:N.a,alt:t.id}):c.a.createElement("img",{src:t,alt:t.id})},x=function(e){var t=e.data,a=e.setData,l=e.rating,r=e.setRating,o=Object(n.useState)(t.id),s=Object(i.a)(o,2),u=s[0],m=s[1];return c.a.createElement("div",{className:"coffeItem"},c.a.createElement("div",{className:"image",key:t.id,onClick:function(){m(t.id),a(t)}},c.a.createElement(C,{data:t.url})),c.a.createElement("h2",null,t.title),c.a.createElement("div",{className:"rating",onClick:function(){m(t.id)},data:t.id},c.a.createElement(O,{rating:l,setRating:function(e){r(e),f.collection("images").doc(u).update({star:e})}})))},R=function(e){e.data;var t=e.setData,a=(e.rating,e.setRating),n=j("images").docs;return c.a.createElement("div",{className:"img-grid"},n&&n.map((function(e){return c.a.createElement(x,{key:e.id,data:e,setData:t,rating:e.star,setRating:a})})))},w=function(){return c.a.createElement("svg",{x:"0px",y:"0px",viewBox:"0 0 472.6 472.6",className:"logo"},c.a.createElement("path",{d:"M368.3,232.6h-26.4l2.4-23.2c0.4-4.4-2.8-8.4-7.2-8.8c-4.4-0.4-8.4,2.8-8.8,7.2l-18.8,198 c-2.8,28.8-26.8,50.8-55.6,50.8H146.7c-29.2,0-53.2-21.6-55.6-50.8l-18-189.2h163.2c4.4,0,8-3.6,8-8s-3.6-8-8-8h-168 c-0.8,0-1.2,0-2,0.4c-0.8-0.4-2-0.4-2.8-0.4c-4.4,0.4-7.6,4.4-7.2,8.8l18.8,198c3.2,37.2,34,65.2,71.6,65.2h107.2 c37.2,0,68-28,71.6-65.2l1.6-18.8h41.2c26.4,0,48-21.6,48-48v-60C416.3,254.2,394.7,232.6,368.3,232.6z M368.3,372.6h-39.6 l11.6-124h27.6c17.6,0,32,14.4,32,32v60h0.4C400.3,358.2,385.9,372.6,368.3,372.6z"}),c.a.createElement("path",{d:"M264.3,208.6c0,4.4,3.6,8,8,8h12c4.4,0,8-3.6,8-8s-3.6-8-8-8h-12C267.9,200.6,264.3,204.2,264.3,208.6z"}),c.a.createElement("path",{d:"M132.7,166.6c0.8,3.6,4.4,6,7.6,6c0.8,0,1.6,0,2-0.4c4.4-1.2,6.8-5.6,5.6-10l-8.8-31.2 c-4-13.6-2-28,5.2-40.4l3.2-5.2c6-10.4,9.2-21.2,9.2-32.4c0-4.4-3.6-8-8-8s-8,3.6-8,8c0,8.4-2.4,16.4-6.8,24.4l-3.2,5.2 c-9.6,16-12,35.2-6.8,53.2L132.7,166.6z"}),c.a.createElement("path",{d:"M192.7,166.6c0.8,3.6,4.4,6,7.6,6c0.8,0,1.6,0,2-0.4c4.4-1.2,6.8-5.6,5.6-10l-8.8-31.2 c-4-13.6-2-28,5.2-40.4l3.2-5.6c8.4-14.8,11.2-32.4,7.6-49.6l-7.2-29.2c-1.2-4.4-5.2-6.8-9.6-6c-4.4,1.2-6.8,5.2-6,9.6l7.2,28.8 c2.8,12.8,0.8,26.4-5.6,37.6l-3.2,5.2c-9.6,16-12,35.2-6.8,53.2L192.7,166.6z"}),c.a.createElement("path",{d:"M252.7,166.6c0.8,3.6,4.4,6,7.6,6c0.8,0,1.6,0,2-0.4c4.4-1.2,6.8-5.6,5.6-10l-8.8-31.2 c-4-13.6-2-28,5.2-40.4c2.4-4,0.8-8.8-2.8-10.8c-4-2.4-8.8-0.8-10.8,2.8c-9.6,16-12,35.2-6.8,53.2L252.7,166.6z"}))},L=function(e){var t=e.data,a=e.setData,l=e.initRating,r=e.rating,o=e.setRating,s=Object(n.useState)(t.notes),u=Object(i.a)(s,2),m=u[0],d=u[1],g=Object(n.useState)(t.star),p=Object(i.a)(g,2);r=p[0],o=p[1];return c.a.createElement("div",{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&a(null)}},c.a.createElement("div",{className:"modal-container"},t.url&&c.a.createElement("div",{className:"modal-img"},c.a.createElement(C,{data:t.url})),c.a.createElement("div",{className:"modal-content"},t.title&&c.a.createElement("h2",null,t.title),c.a.createElement("textarea",{id:"file-notes",rows:5,cols:5,placeholder:"Smaksnotater ...",value:m,onChange:function(e){d(e.target.value),f.collection("images").doc(t.id).update({notes:m})}}),t.star&&c.a.createElement("div",{className:"modal-stars"},c.a.createElement(O,{rating:r,setRating:function(e){o(e),l(e),f.collection("images").doc(t.id).update({star:e})}})))))},I=function(){return c.a.createElement("div",{className:"title"},c.a.createElement("h1",null,"Kaffeliste"))},q=function(e){var t=Object(n.useState)(0),a=Object(i.a)(t,2),c=a[0],l=a[1],r=Object(n.useState)(null),o=Object(i.a)(r,2),m=o[0],p=o[1],E=Object(n.useState)(null),v=Object(i.a)(E,2),h=v[0],b=v[1];return Object(n.useEffect)((function(){var t=d.ref(e.name),a=f.collection("images");t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;l(t)}),(function(e){p(e)}),Object(u.a)(s.a.mark((function e(){var n,c,l,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:n=e.sent,c=g(),l=localStorage.getItem("title"),r=localStorage.getItem("rating"),i=localStorage.getItem("notes"),a.add({url:n,createdAt:c,title:l,star:r,notes:i}),b(n),document.querySelector("form").style.display="none",document.querySelector(".backdrop").style.display="none",document.querySelector(".img-grid").style.display="grid";case 12:case"end":return e.stop()}}),e)}))))}),[e]),{progress:c,url:h,error:m}},z=function(e){var t=e.file,a=e.setFile,l=q(t),r=l.url,i=l.progress;return Object(n.useEffect)((function(){r&&a(null)}),[r,a]),c.a.createElement("div",{className:"progress-bar",style:{width:i+"%"}})},A=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)(null),o=Object(i.a)(r,2),s=o[0],u=o[1],m=["image/png","image/jpg","image/jpeg","image/heic"],d=Object(n.useState)(0),f=Object(i.a)(d,2),g=f[0],p=f[1],E=function(e){var t=e.currentTarget,a=t.name,n=t.value;"title"===a?localStorage.setItem("title",n):"notes"===a&&localStorage.setItem("notes",n)};return c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{className:"addNewBtn",onClick:function(e){document.querySelector("form").style.display="flex",document.querySelector(".backdrop").style.display="block",document.querySelector(".img-grid").style.display="none"}},"Legg til ny kaffetype"),c.a.createElement("div",{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&(document.querySelector("form").style.display="none",document.querySelector(".img-grid").style.display="grid",document.querySelector(".backdrop").style.display="none",document.querySelector("#file-title").value="",document.querySelector("#file-notes").value="")},style:{display:"none"}},c.a.createElement("form",{style:{display:"none"}},c.a.createElement("input",{id:"file-title",type:"text",name:"title",placeholder:"Hva heter kaffetypen?",onChange:function(e){return E(e)}}),c.a.createElement("textarea",{id:"file-notes",name:"notes",rows:5,cols:5,placeholder:"Smaksnotater ...",onChange:function(e){return E(e)}}),c.a.createElement("div",{className:"starRating"},c.a.createElement(O,{rating:g,setRating:function(e){p(e),localStorage.setItem("rating",e)}})),c.a.createElement("label",{htmlFor:"file-upload",className:"custom-file-upload"},"Legg til bilde"),c.a.createElement("input",{id:"file-upload",type:"file",onChange:function(e){var t=e.target.files[0];t&&m.includes(t.type)?(l(t),u("")):(l(null),u("Please select an image file (png, heic or jpeg)"))}}),c.a.createElement("div",{className:"output"},s&&c.a.createElement("div",{className:"error"},s),a&&c.a.createElement(z,{file:a,setFile:l})))))};function D(){return Object(n.useContext)(h).user.uid?null:c.a.createElement("div",{className:"login-buttons"},c.a.createElement("button",{className:"loginBtn",onClick:v},c.a.createElement("span",null," Continue with Google")))}var B=function(){var e=Object(n.useContext)(h);return e=e.user,c.a.createElement("div",{className:"user"},c.a.createElement("img",{src:e.photoURL,alt:e.photoURL}),c.a.createElement("p",null,"Hei ",e.displayName))};var M=function(){var e=function(e){e&&m(e)},t=Object(n.useState)(null),a=Object(i.a)(t,2),l=a[0],r=a[1],o=Object(n.useState)(e),s=Object(i.a)(o,2),u=s[0],m=s[1];return c.a.createElement(b,null,c.a.createElement("div",{className:"App"},c.a.createElement(w,null),c.a.createElement(B,null),c.a.createElement(D,null),c.a.createElement(I,null),c.a.createElement(A,null),c.a.createElement(R,{data:l,setData:r,rating:u,setRating:m}),l&&c.a.createElement(L,{data:l,setData:r,initRating:e,rating:u,setRating:m})))};r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(M,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.e23c81ed.chunk.js.map