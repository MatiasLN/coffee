(this.webpackJsonpcoffee=this.webpackJsonpcoffee||[]).push([[0],{13:function(e,t,a){e.exports=a.p+"static/media/placeholder.505dce53.jpeg"},15:function(e,t,a){e.exports=a(26)},20:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),l=a(12),r=a.n(l),i=(a(20),a(1)),s=a(8),o=a(4);a(27),a(21);o.initializeApp({apiKey:"AIzaSyD26XUmLKds2rS-ONbGjbXC80kHpa0mAxk",authDomain:"covfefe-4e9ea.firebaseapp.com",databaseURL:"https://covfefe-4e9ea.firebaseio.com",projectId:"covfefe-4e9ea",storageBucket:"covfefe-4e9ea.appspot.com",messagingSenderId:"1015333247439",appId:"1:1015333247439:web:903c647f24fac151355aba"});var u=o.storage(),m=o.firestore(),d=o.firestore.FieldValue.serverTimestamp,g=function(e){var t=Object(c.useState)([]),a=Object(i.a)(t,2),n=a[0],l=a[1];return Object(c.useEffect)((function(){var t=m.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(s.a)(Object(s.a)({},e.data()),{},{id:e.id}))})),l(t)}));return function(){return t()}}),[e]),{docs:n}},f=function(e){var t=e.isSelected,a=e.setRating;e.click;return n.a.createElement("li",{className:t?"selected":null,onClick:a},n.a.createElement("svg",{x:"0px",y:"0px",viewBox:"0 0 16 15",className:"star"},n.a.createElement("path",{d:"M8.5,0.3l2,4.1c0.1,0.2,0.2,0.3,0.4,0.3l4.6,0.7c0.4,0.1,0.6,0.6,0.3,0.9l-3.3,3.2c-0.1,0.1-0.2,0.3-0.2,0.5l0.8,4.5 c0.1,0.4-0.4,0.8-0.8,0.6l-4.1-2.1c-0.2-0.1-0.3-0.1-0.5,0l-4.1,2.1c-0.4,0.2-0.9-0.1-0.8-0.6l0.8-4.5c0-0.2,0-0.4-0.2-0.5L0.2,6.2 C-0.2,5.9,0,5.4,0.5,5.3L5,4.7c0.2,0,0.3-0.1,0.4-0.3l2-4.1C7.7-0.1,8.3-0.1,8.5,0.3z"})))};var p=function(e){var t=e.rating,a=e.setRating;return n.a.createElement("ul",{className:"stars"},function(){for(var e=[],c=function(c){e.push(n.a.createElement(f,{isSelected:t>c,setRating:function(){return a(c+1)},key:c}))},l=0;l<5;l++)c(l);return e}())},E=a(13),v=a.n(E),b=function(e){var t=e.data;return["localhost","127.0.0.1"].includes(window.location.hostname)?n.a.createElement("img",{src:v.a,alt:t.id}):n.a.createElement("img",{src:t,alt:t.id})},y=function(e){var t=e.data,a=e.setData,l=e.rating,r=e.setRating,s=Object(c.useState)(t.id),o=Object(i.a)(s,2),u=o[0],d=o[1];return n.a.createElement("div",{className:"coffeItem"},n.a.createElement("div",{className:"image",key:t.id,onClick:function(){d(t.id),a(t)}},n.a.createElement(b,{data:t.url})),n.a.createElement("h2",null,t.title),n.a.createElement("div",{className:"rating",onClick:function(){d(t.id)},data:t.id},n.a.createElement(p,{rating:l,setRating:function(e){r(e),m.collection("images").doc(u).update({star:e})}})))},h=function(e){e.data;var t=e.setData,a=(e.rating,e.setRating),c=g("images").docs;return n.a.createElement("div",{className:"img-grid"},c&&c.map((function(e){return n.a.createElement(y,{key:e.id,data:e,setData:t,rating:e.star,setRating:a})})))},j=function(){return n.a.createElement("svg",{x:"0px",y:"0px",viewBox:"0 0 472.6 472.6",className:"logo"},n.a.createElement("path",{d:"M368.3,232.6h-26.4l2.4-23.2c0.4-4.4-2.8-8.4-7.2-8.8c-4.4-0.4-8.4,2.8-8.8,7.2l-18.8,198 c-2.8,28.8-26.8,50.8-55.6,50.8H146.7c-29.2,0-53.2-21.6-55.6-50.8l-18-189.2h163.2c4.4,0,8-3.6,8-8s-3.6-8-8-8h-168 c-0.8,0-1.2,0-2,0.4c-0.8-0.4-2-0.4-2.8-0.4c-4.4,0.4-7.6,4.4-7.2,8.8l18.8,198c3.2,37.2,34,65.2,71.6,65.2h107.2 c37.2,0,68-28,71.6-65.2l1.6-18.8h41.2c26.4,0,48-21.6,48-48v-60C416.3,254.2,394.7,232.6,368.3,232.6z M368.3,372.6h-39.6 l11.6-124h27.6c17.6,0,32,14.4,32,32v60h0.4C400.3,358.2,385.9,372.6,368.3,372.6z"}),n.a.createElement("path",{d:"M264.3,208.6c0,4.4,3.6,8,8,8h12c4.4,0,8-3.6,8-8s-3.6-8-8-8h-12C267.9,200.6,264.3,204.2,264.3,208.6z"}),n.a.createElement("path",{d:"M132.7,166.6c0.8,3.6,4.4,6,7.6,6c0.8,0,1.6,0,2-0.4c4.4-1.2,6.8-5.6,5.6-10l-8.8-31.2 c-4-13.6-2-28,5.2-40.4l3.2-5.2c6-10.4,9.2-21.2,9.2-32.4c0-4.4-3.6-8-8-8s-8,3.6-8,8c0,8.4-2.4,16.4-6.8,24.4l-3.2,5.2 c-9.6,16-12,35.2-6.8,53.2L132.7,166.6z"}),n.a.createElement("path",{d:"M192.7,166.6c0.8,3.6,4.4,6,7.6,6c0.8,0,1.6,0,2-0.4c4.4-1.2,6.8-5.6,5.6-10l-8.8-31.2 c-4-13.6-2-28,5.2-40.4l3.2-5.6c8.4-14.8,11.2-32.4,7.6-49.6l-7.2-29.2c-1.2-4.4-5.2-6.8-9.6-6c-4.4,1.2-6.8,5.2-6,9.6l7.2,28.8 c2.8,12.8,0.8,26.4-5.6,37.6l-3.2,5.2c-9.6,16-12,35.2-6.8,53.2L192.7,166.6z"}),n.a.createElement("path",{d:"M252.7,166.6c0.8,3.6,4.4,6,7.6,6c0.8,0,1.6,0,2-0.4c4.4-1.2,6.8-5.6,5.6-10l-8.8-31.2 c-4-13.6-2-28,5.2-40.4c2.4-4,0.8-8.8-2.8-10.8c-4-2.4-8.8-0.8-10.8,2.8c-9.6,16-12,35.2-6.8,53.2L252.7,166.6z"}))},S=function(e){var t=e.data,a=e.setData,l=e.initRating,r=e.rating,s=e.setRating,o=Object(c.useState)(t.notes),u=Object(i.a)(o,2),d=u[0],g=u[1],f=Object(c.useState)(t.star),E=Object(i.a)(f,2);r=E[0],s=E[1];return n.a.createElement("div",{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&a(null)}},n.a.createElement("div",{className:"modal-container"},t.url&&n.a.createElement("div",{className:"modal-img"},n.a.createElement(b,{data:t.url})),n.a.createElement("div",{className:"modal-content"},t.title&&n.a.createElement("h2",null,t.title),n.a.createElement("textarea",{id:"file-notes",rows:5,cols:5,placeholder:"Smaksnotater ...",value:d,onChange:function(e){g(e.target.value),m.collection("images").doc(t.id).update({notes:d})}}),t.star&&n.a.createElement("div",{className:"modal-stars"},n.a.createElement(p,{rating:r,setRating:function(e){s(e),l(e),m.collection("images").doc(t.id).update({star:e})}})))))},O=function(){return n.a.createElement("div",{className:"title"},n.a.createElement("h1",null,"Kaffeliste"))},k=a(7),N=a.n(k),x=a(14),R=function(e){var t=Object(c.useState)(0),a=Object(i.a)(t,2),n=a[0],l=a[1],r=Object(c.useState)(null),s=Object(i.a)(r,2),o=s[0],g=s[1],f=Object(c.useState)(null),p=Object(i.a)(f,2),E=p[0],v=p[1];return Object(c.useEffect)((function(){var t=u.ref(e.name),a=m.collection("images");t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;l(t)}),(function(e){g(e)}),Object(x.a)(N.a.mark((function e(){var c,n,l,r,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:c=e.sent,n=d(),l=localStorage.getItem("title"),r=localStorage.getItem("rating"),i=localStorage.getItem("notes"),a.add({url:c,createdAt:n,title:l,star:r,notes:i}),v(c),document.querySelector("form").style.display="none",document.querySelector(".backdrop").style.display="none",document.querySelector(".img-grid").style.display="grid";case 12:case"end":return e.stop()}}),e)}))))}),[e]),{progress:n,url:E,error:o}},C=function(e){var t=e.file,a=e.setFile,l=R(t),r=l.url,i=l.progress;return Object(c.useEffect)((function(){r&&a(null)}),[r,a]),n.a.createElement("div",{className:"progress-bar",style:{width:i+"%"}})},w=function(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),a=t[0],l=t[1],r=Object(c.useState)(""),s=Object(i.a)(r,2),o=s[0],u=s[1],m=Object(c.useState)(null),d=Object(i.a)(m,2),g=d[0],f=d[1],E=["image/png","image/jpg","image/jpeg","image/heic"],v=Object(c.useState)(0),b=Object(i.a)(v,2),y=b[0],h=b[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{className:"addNewBtn",onClick:function(e){document.querySelector("form").style.display="flex",document.querySelector(".backdrop").style.display="block",document.querySelector(".img-grid").style.display="none"}},"Legg til ny kaffetype"),n.a.createElement("div",{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&(document.querySelector("form").style.display="none",document.querySelector(".img-grid").style.display="grid",document.querySelector(".backdrop").style.display="none")},style:{display:"none"}},n.a.createElement("form",{style:{display:"none"}},n.a.createElement("input",{id:"file-title",type:"text",placeholder:"Hva heter kaffetypen?",onChange:function(e){u(e.target.value),localStorage.setItem("title",e.target.value)},value:o}),n.a.createElement("textarea",{id:"file-notes",rows:5,cols:5,placeholder:"Smaksnotater ...",onChange:function(e){localStorage.setItem("notes",e.target.value)}}),n.a.createElement("div",{className:"starRating"},n.a.createElement(p,{rating:y,setRating:function(e){h(e),localStorage.setItem("rating",e)}})),n.a.createElement("label",{htmlFor:"file-upload",className:"custom-file-upload"},"Legg til bilde"),n.a.createElement("input",{id:"file-upload",type:"file",onChange:function(e){var t=e.target.files[0];t&&E.includes(t.type)?(l(t),f("")):(l(null),f("Please select an image file (png, heic or jpeg)"))}}),n.a.createElement("div",{className:"output"},g&&n.a.createElement("div",{className:"error"},g),a&&n.a.createElement("div",null,"Legger til ",o," i databasen"),a&&n.a.createElement(C,{file:a,setFile:l})))))};var L=function(){var e=function(e){e&&m(e)},t=Object(c.useState)(null),a=Object(i.a)(t,2),l=a[0],r=a[1],s=Object(c.useState)(e),o=Object(i.a)(s,2),u=o[0],m=o[1];return n.a.createElement("div",{className:"App"},n.a.createElement(j,null),n.a.createElement(O,null),n.a.createElement(w,null),n.a.createElement(h,{data:l,setData:r,rating:u,setRating:m}),l&&n.a.createElement(S,{data:l,setData:r,initRating:e,rating:u,setRating:m}))};r.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(L,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.9b6d8570.chunk.js.map